<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Task Analyzer</title>
  <link rel="stylesheet" href="styles.css" />

  <link href="https://unpkg.com/vis-network/styles/vis-network.min.css" rel="stylesheet" type="text/css" />
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

</head>
<body>
  <div class="container">
    <header>
      <h1>Smart Task Analyzer</h1>
      <p class="subtitle">Add tasks, paste JSON, choose a strategy and analyze priorities</p>

    </header>

    <section class="input-section card">
      <h3>Add Task</h3>

      <form id="taskForm">
        <label>Title
          <input name="title" required autocomplete="off" />
        </label>

        <div class="row two">
          <label>Due date
            <input name="due_date" type="date" />
          </label>
          <label>Estimated hours
            <input name="estimated_hours" type="number" step="1" min="1" value="1" />
          </label>
        </div>

        <div class="row two">
          <label>Importance (1-10)
            <input name="importance" type="number" min="1" max="10" value="5" />
          </label>
          <label>Dependencies (comma separated ids)
            <input name="dependencies" placeholder="e.g. 1,2" />
          </label>
        </div>

        <div class="actions">
          <button type="submit" class="big primary">Add Task</button>
          <button id="clearList" type="button">Clear All</button>
        </div>
      </form>

      <hr class="sep" />

      <h3>Bulk JSON (paste array of tasks)</h3>
      <p class="muted-small">Format: <code>[{ "title": "...", "due_date": "YYYY-MM-DD", "estimated_hours": 2, "importance": 7, "dependencies": [1] }, ...]</code></p>
      <textarea id="bulkInput" placeholder='[{"title":"Fix bug","due_date":"2025-11-30","estimated_hours":2,"importance":8,"dependencies":[]}]'></textarea>
      <div class="bulk-actions">
        <button id="loadBulk">Load JSON</button>
        <button id="appendBulk">Append JSON</button>
        <div id="bulkError" class="error hidden"></div>
      </div>

      <div class="row" style="margin-top:1rem; align-items:center;">
        <label style="margin-bottom:0;">Strategy:
          <select id="strategySelect">
            <option value="smart">Smart Balance</option>
            <option value="fast">Fastest Wins</option>
            <option value="impact">High Impact</option>
            <option value="deadline">Deadline Driven</option>
          </select>
        </label>

        <div class="btn-group">
          <button id="analyzeBtn" class="big primary">Analyze Tasks</button>
          <button id="suggestBtn" class="big">Top 3 Suggestions</button>
        </div>
      </div>
    </section>

    <section class="tasks-section card">
      <h3>Tasks to Analyze</h3>
      <div id="taskList" class="task-list"></div>
    </section>

    <section class="output-section card">
      <h3>Analysis Result</h3>
      <div id="loading" class="hidden">Analyzingâ€¦</div>
      <div id="error" class="hidden error"></div>
      <div id="resultList" class="task-list"></div>
    </section>

    <section class="output-section card">
      <h3>Top 3 Suggestions</h3>
      <div id="suggestList" class="task-list"></div>
    </section>


  <section class="output-section card">
  <h3>Dependency Graph</h3>
  <div style="display:flex; gap:1rem; flex-wrap:wrap;">
    <pre id="graphOutput" class="graph" style="flex:1; min-width:200px;">No tasks.</pre>
    <div id="graphVis" style="flex:2; height:400px; border:1px solid #ccc;"></div>
  </div>
</section>

  <script src="script.js"></script>
</body>
</html>
